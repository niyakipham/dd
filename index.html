<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒêi·ªÉm Danh L·ªõp CT2901</title>
    <style>
        body {
            background-color: #FFD54F; /* M√†u v√†ng nh·∫°t nh∆∞ n·ªÅn ·∫£nh */
            background-image: radial-gradient(circle, rgba(0,0,0,0.1) 1px, transparent 1px);
            background-size: 10px 10px; /* Ch·∫•m bi */
            font-family: 'Arial', sans-serif;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .container {
            background-color: #FFFDE7; /* M√†u kem nh·∫°t nh∆∞ th·∫ª trong ·∫£nh */
            border-radius: 20px;
            padding: 20px;
            max-width: 600px; /* TƒÉng r·ªông ƒë·ªÉ ch·ª©a th√™m ph·∫ßn l·ªãch s·ª≠ */
            width: 100%;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            text-align: center;
        }

        h1 {
            font-size: 24px;
            margin-bottom: 20px;
            color: #333;
        }

        .date-picker {
            margin-bottom: 20px;
        }

        input[type="date"] {
            padding: 10px;
            border-radius: 10px;
            border: 1px solid #ccc;
            font-size: 16px;
        }

        .student-card {
            background-color: white;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .student-name {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .student-msv {
            font-size: 16px;
            color: #666;
        }

        .checkbox {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        input[type="checkbox"] {
            width: 24px;
            height: 24px;
            margin-right: 10px;
            accent-color: #4CAF50; /* M√†u xanh tick nh∆∞ ·∫£nh */
        }

        label {
            font-size: 18px;
        }

        button {
            background-color: #FFEB3B; /* M√†u v√†ng n√∫t nh∆∞ "I'M DONE!" */
            border: none;
            border-radius: 10px;
            padding: 10px 20px;
            font-size: 18px;
            font-weight: bold;
            color: #333;
            cursor: pointer;
            transition: background-color 0.3s;
            margin: 5px;
        }

        button:hover {
            background-color: #FDD835;
        }

        .summary {
            display: none;
            text-align: left;
        }

        .summary h2 {
            font-size: 20px;
            margin-bottom: 10px;
        }

        ul {
            list-style-type: none;
            padding: 0;
        }

        li {
            background-color: #FFE082;
            border-radius: 8px;
            padding: 8px;
            margin-bottom: 5px;
        }

        /* Ph·∫ßn l·ªãch s·ª≠ */
        .history-section {
            margin-top: 30px;
            text-align: left;
        }

        select {
            padding: 10px;
            border-radius: 10px;
            border: 1px solid #ccc;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .history-days {
            margin-top: 20px;
        }

        .history-detail {
            display: none;
            margin-top: 20px;
        }

        /* Emoji vui v·∫ª ƒë·ªÉ gi·ªëng phong c√°ch ·∫£nh */
        .emoji {
            font-size: 30px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ƒêi·ªÉm Danh L·ªõp CT2901 <span class="emoji">üìã</span></h1>
        
        <!-- Ph·∫ßn ch·ªçn ng√†y v√† b·∫Øt ƒë·∫ßu ƒëi·ªÉm danh -->
        <div id="start-section">
            <div class="date-picker">
                <label for="attendance-date">Ch·ªçn ng√†y ƒëi·ªÉm danh:</label><br>
                <input type="date" id="attendance-date">
            </div>
            <button id="start-btn">B·∫Øt ƒê·∫ßu ƒêi·ªÉm Danh</button>
        </div>
        
        <!-- Ph·∫ßn ƒëi·ªÉm danh -->
        <div id="attendance-form" style="display: none;">
            <div class="student-card">
                <div class="student-name" id="student-name"></div>
                <div class="student-msv" id="student-msv"></div>
            </div>
            <div class="checkbox">
                <input type="checkbox" id="present">
                <label for="present">C√≥ m·∫∑t</label>
            </div>
            <button id="next-btn">Ti·∫øp Theo</button>
        </div>
        
        <!-- Ph·∫ßn t·ªïng k·∫øt ngay l·∫≠p t·ª©c -->
        <div class="summary" id="summary" style="display: none;">
            <h2>K·∫øt Qu·∫£ ƒêi·ªÉm Danh <span class="emoji">‚úÖ</span></h2>
            <p>Ng√†y: <span id="summary-date"></span></p>
            <p>Sƒ© s·ªë l·ªõp: 44</p>
            <p>S·ªë v·∫Øng: <span id="absent-count"></span></p>
            <h3>Danh s√°ch v·∫Øng:</h3>
            <ul id="absent-list"></ul>
            <button id="back-to-start">Quay L·∫°i</button>
        </div>
        
        <!-- Ph·∫ßn xem l·ªãch s·ª≠ theo th√°ng/nƒÉm -->
        <div class="history-section">
            <h2>Xem L·ªãch S·ª≠ ƒêi·ªÉm Danh <span class="emoji">üóìÔ∏è</span></h2>
            <label for="month-year">Ch·ªçn th√°ng/nƒÉm:</label><br>
            <select id="month-year"></select>
            <button id="view-history">Xem</button>
            <div class="history-days" id="history-days"></div>
            <div class="history-detail" id="history-detail"></div>
        </div>
    </div>

    <script>
        // Danh s√°ch sinh vi√™n l·ªõp CT2901
        const students = [
            { msv: '2512101028', name: 'Nguy·ªÖn Kim B√¨nh An' },
            { msv: '2512101077', name: 'Ph·∫°m Di·ªáp Anh' },
            { msv: '2512101075', name: 'L√™ Vi·ªát Anh' },
            { msv: '2512101101', name: 'Ng√¥ Xu√¢n B·∫£o' },
            { msv: '2512101091', name: 'Nguy·ªÖn ƒê·ª©c Chung' },
            { msv: '2512101086', name: 'Nguy·ªÖn Nh·∫≠t Duy' },
            { msv: '2512101020', name: 'Nguy·ªÖn T·∫•n D≈©ng' },
            { msv: '2512101099', name: 'B√πi VƒÉn D≈©ng' },
            { msv: '2512101047', name: 'Cao ƒê·∫Øc ƒê·∫°t' },
            { msv: '2512101008', name: 'Ph·∫°m Th√†nh ƒê·∫°t' },
            { msv: '2512101085', name: 'Nguy·ªÖn Ng·ªçc ƒê·ª©c' },
            { msv: '2512101113', name: 'Ho√†ng Th·ªã H√¢n' },
            { msv: '2512101022', name: 'Ph·∫°m VƒÉn H√¢n' },
            { msv: '2512101025', name: 'Nguy·ªÖn Ch√≠ Hi·∫øu' },
            { msv: '2512101007', name: 'H√† ƒê·ª©c Hi·∫øu' },
            { msv: '2512101081', name: 'Nguy·ªÖn Trung Hi·∫øu' },
            { msv: '2512751015', name: 'Ph·∫°m Ho√†ng Hi·ªáp' },
            { msv: '2512101087', name: 'Nguy·ªÖn Ti·∫øn Ho√†ng' },
            { msv: '2512101067', name: 'Ph·∫°m VƒÉn Ho√†ng' },
            { msv: '2512101062', name: 'Ng√¥ Ho√†ng Huy' },
            { msv: '2512101037', name: 'Ph·∫°m Qu·ªëc Huy' },
            { msv: '2512101018', name: 'Ph·∫°m Kh√°nh H∆∞ng' },
            { msv: '2512101060', name: 'Tr·∫ßn Duy Kh√°nh' },
            { msv: '2512101016', name: 'L√™ ƒê√¨nh Minh Kh√¥i' },
            { msv: '2512101042', name: 'Nguy·ªÖn Ho√†ng Long' },
            { msv: '2512101092', name: 'Tr·∫ßn Kh√°nh Ly' },
            { msv: '2512101069', name: 'L√™ Minh' },
            { msv: '2512101019', name: 'L√™ ƒê·ª©c Minh' },
            { msv: '2512101073', name: 'Nguy·ªÖn Ph√∫ Minh' },
            { msv: '2512101125', name: 'Nguy·ªÖn Th·ªã Ng·ªçc Minh' },
            { msv: '2512101095', name: 'Ph·∫°m Trung Nghƒ©a' },
            { msv: '2512101011', name: 'ƒê·ªó Kh√°nh Nguy√™n' },
            { msv: '2512101112', name: 'Ho√†ng Th·ªã Nhi√™n' },
            { msv: '2512101089', name: 'V≈© ƒê·ª©c Phong' },
            { msv: '2512101083', name: 'L√™ Th·∫ø Ho√†ng Phong' },
            { msv: '2512101110', name: 'Nguy·ªÖn Mai Ph∆∞∆°ng' },
            { msv: '2512101084', name: 'Nguy·ªÖn Anh Qu√¢n' },
            { msv: '2512101013', name: 'H√† C√¥ng Quy·ªÅn' },
            { msv: '2512101065', name: 'Ho√†ng Th√°i S∆°n' },
            { msv: '2512101055', name: 'Nguy·ªÖn C√¥ng Ti·∫øn' },
            { msv: '2512101004', name: 'Nguy·ªÖn VƒÉn Tr∆∞·ªùng' },
            { msv: '2512101005', name: 'T√¥ Anh Tu·∫•n' },
            { msv: '2512101049', name: 'ƒê·ªó Anh T√∫' },
            { msv: '2512101009', name: 'Nguy·ªÖn Quang Vinh' }
        ];

        let currentIndex = 0;
        let attendance = new Array(students.length).fill(false);
        let selectedDate = '';

        const startSection = document.getElementById('start-section');
        const dateInput = document.getElementById('attendance-date');
        const startBtn = document.getElementById('start-btn');
        const formEl = document.getElementById('attendance-form');
        const studentNameEl = document.getElementById('student-name');
        const studentMsvEl = document.getElementById('student-msv');
        const presentCheckbox = document.getElementById('present');
        const nextBtn = document.getElementById('next-btn');
        const summaryEl = document.getElementById('summary');
        const summaryDateEl = document.getElementById('summary-date');
        const absentCountEl = document.getElementById('absent-count');
        const absentListEl = document.getElementById('absent-list');
        const backToStartBtn = document.getElementById('back-to-start');

        // Ph·∫ßn l·ªãch s·ª≠
        const monthYearSelect = document.getElementById('month-year');
        const viewHistoryBtn = document.getElementById('view-history');
        const historyDaysEl = document.getElementById('history-days');
        const historyDetailEl = document.getElementById('history-detail');

        // T·∫£i d·ªØ li·ªáu t·ª´ LocalStorage
        function getAttendanceData() {
            const data = localStorage.getItem('attendanceData');
            return data ? JSON.parse(data) : {};
        }

        // L∆∞u d·ªØ li·ªáu v√†o LocalStorage
        function saveAttendanceData(data) {
            localStorage.setItem('attendanceData', JSON.stringify(data));
        }

        // C·∫≠p nh·∫≠t select th√°ng/nƒÉm
        function updateMonthYearSelect() {
            const data = getAttendanceData();
            const months = Object.keys(data).sort().reverse();
            monthYearSelect.innerHTML = '';
            months.forEach(month => {
                const option = document.createElement('option');
                option.value = month;
                option.textContent = month;
                monthYearSelect.appendChild(option);
            });
        }

        // Hi·ªÉn th·ªã danh s√°ch ng√†y trong th√°ng
        function showDaysInMonth(month) {
            historyDaysEl.innerHTML = '<h3>C√°c ng√†y c√≥ ƒëi·ªÉm danh:</h3>';
            const data = getAttendanceData();
            const days = Object.keys(data[month] || {}).sort((a,b) => a - b);
            if (days.length === 0) {
                historyDaysEl.innerHTML += '<p>Kh√¥ng c√≥ d·ªØ li·ªáu.</p>';
                return;
            }
            days.forEach(day => {
                const btn = document.createElement('button');
                btn.textContent = `Ng√†y ${day}`;
                btn.onclick = () => showHistoryDetail(month, day);
                historyDaysEl.appendChild(btn);
            });
        }

        // Hi·ªÉn th·ªã chi ti·∫øt ƒëi·ªÉm danh ng√†y
        function showHistoryDetail(month, day) {
            historyDetailEl.style.display = 'block';
            historyDetailEl.innerHTML = `<h3>K·∫øt Qu·∫£ Ng√†y ${day}/${month.replace('-', '/')}</h3>`;
            const data = getAttendanceData();
            const att = data[month][day];
            const absentStudents = students.filter((_, i) => !att[i]);
            historyDetailEl.innerHTML += `<p>Sƒ© s·ªë l·ªõp: 44</p><p>S·ªë v·∫Øng: ${absentStudents.length}</p><h4>Danh s√°ch v·∫Øng:</h4><ul>`;
            absentStudents.forEach(student => {
                historyDetailEl.innerHTML += `<li>${student.name} (MSV: ${student.msv})</li>`;
            });
            historyDetailEl.innerHTML += '</ul>';
        }

        function showStudent(index) {
            if (index >= students.length) {
                showSummary();
                saveAttendance();
                return;
            }
            studentNameEl.textContent = students[index].name;
            studentMsvEl.textContent = `MSV: ${students[index].msv}`;
            presentCheckbox.checked = false;
        }

        function showSummary() {
            formEl.style.display = 'none';
            summaryEl.style.display = 'block';
            summaryDateEl.textContent = selectedDate;

            const absentStudents = students.filter((_, i) => !attendance[i]);
            absentCountEl.textContent = absentStudents.length;

            absentListEl.innerHTML = '';
            absentStudents.forEach(student => {
                const li = document.createElement('li');
                li.textContent = `${student.name} (MSV: ${student.msv})`;
                absentListEl.appendChild(li);
            });
        }

        function saveAttendance() {
            const data = getAttendanceData();
            const [year, month, day] = selectedDate.split('-');
            const monthKey = `${year}-${month}`;
            if (!data[monthKey]) data[monthKey] = {};
            data[monthKey][parseInt(day)] = attendance;
            saveAttendanceData(data);
            updateMonthYearSelect();
        }

        // S·ª± ki·ªán
        startBtn.addEventListener('click', () => {
            selectedDate = dateInput.value;
            if (!selectedDate) {
                alert('Vui l√≤ng ch·ªçn ng√†y!');
                return;
            }
            startSection.style.display = 'none';
            formEl.style.display = 'block';
            currentIndex = 0;
            attendance = new Array(students.length).fill(false);
            showStudent(0);
        });

        nextBtn.addEventListener('click', () => {
            attendance[currentIndex] = presentCheckbox.checked;
            currentIndex++;
            showStudent(currentIndex);
        });

        backToStartBtn.addEventListener('click', () => {
            summaryEl.style.display = 'none';
            startSection.style.display = 'block';
        });

        viewHistoryBtn.addEventListener('click', () => {
            const month = monthYearSelect.value;
            if (month) {
                showDaysInMonth(month);
                historyDetailEl.style.display = 'none';
            }
        });

        // Kh·ªüi t·∫°o
        const today = new Date().toISOString().split('T')[0];
        dateInput.value = today;
        updateMonthYearSelect();
    </script>
</body>
</html>
